(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[931],{410:function(e,s,a){Promise.resolve().then(a.bind(a,8611))},8850:function(e,s,a){"use strict";let t=a(2265).createContext({});s.Z=t},8611:function(e,s,a){"use strict";a.r(s),a.d(s,{default:function(){return v}});var t=a(7437);function l(e){return Math.floor(e/3600).toString().padStart(2,"0")+":"+Math.floor(e%3600/60).toString().padStart(2,"0")+":"+(e%60).toString().padStart(2,"0")}var n=a(8111),i=a(1055),r=a(8087),c=a(3031),d=a(6296),o=a(2265),h=e=>{let{isVisible:s,onConfirm:a,message:l,handleVisiblity:n}=e;return(0,t.jsx)(t.Fragment,{children:s&&(0,t.jsx)("article",{className:"fixed top-0 left-0 w-full h-full bg-black bg-opacity-60 backdrop-blur-sm z-30 flex items-center justify-center",onClick:e=>n(!1),children:(0,t.jsxs)("div",{className:"flex flex-col gap-4 bg-content1 p-8 rounded-md z-30",onClick:e=>e.stopPropagation(),children:[(0,t.jsx)("div",{children:(0,t.jsx)("p",{children:l})}),(0,t.jsxs)("div",{className:"flex gap-2 self-end",children:[(0,t.jsx)(d.A,{color:"danger",variant:"flat",radius:"sm",onClick:()=>n(!1),children:"Cancel"}),(0,t.jsx)(d.A,{color:"primary",variant:"flat",radius:"sm",onClick:()=>{a(),n(!1)},children:"Confirm"})]})]})})})},f=a(812),x=a(1774);let u=e=>(0,t.jsx)("svg",{"aria-hidden":"true",focusable:"false",height:"1em",role:"presentation",viewBox:"0 0 24 24",width:"1em",...e,children:(0,t.jsx)("path",{d:"M21.53 15.93c-.16-.27-.61-.69-1.73-.49a8.46 8.46 0 01-1.88.13 8.409 8.409 0 01-5.91-2.82 8.068 8.068 0 01-1.44-8.66c.44-1.01.13-1.54-.09-1.76s-.77-.55-1.83-.11a10.318 10.318 0 00-6.32 10.21 10.475 10.475 0 007.04 8.99 10 10 0 002.89.55c.16.01.32.02.48.02a10.5 10.5 0 008.47-4.27c.67-.93.49-1.519.32-1.79z",fill:"currentColor"})}),m=e=>(0,t.jsx)("svg",{"aria-hidden":"true",focusable:"false",height:"1em",role:"presentation",viewBox:"0 0 24 24",width:"1em",...e,children:(0,t.jsxs)("g",{fill:"currentColor",children:[(0,t.jsx)("path",{d:"M19 12a7 7 0 11-7-7 7 7 0 017 7z"}),(0,t.jsx)("path",{d:"M12 22.96a.969.969 0 01-1-.96v-.08a1 1 0 012 0 1.038 1.038 0 01-1 1.04zm7.14-2.82a1.024 1.024 0 01-.71-.29l-.13-.13a1 1 0 011.41-1.41l.13.13a1 1 0 010 1.41.984.984 0 01-.7.29zm-14.28 0a1.024 1.024 0 01-.71-.29 1 1 0 010-1.41l.13-.13a1 1 0 011.41 1.41l-.13.13a1 1 0 01-.7.29zM22 13h-.08a1 1 0 010-2 1.038 1.038 0 011.04 1 .969.969 0 01-.96 1zM2.08 13H2a1 1 0 010-2 1.038 1.038 0 011.04 1 .969.969 0 01-.96 1zm16.93-7.01a1.024 1.024 0 01-.71-.29 1 1 0 010-1.41l.13-.13a1 1 0 011.41 1.41l-.13.13a.984.984 0 01-.7.29zm-14.02 0a1.024 1.024 0 01-.71-.29l-.13-.14a1 1 0 011.41-1.41l.13.13a1 1 0 010 1.41.97.97 0 01-.7.3zM12 3.04a.969.969 0 01-1-.96V2a1 1 0 012 0 1.038 1.038 0 01-1 1.04z"})]})});var j=()=>{let{themes:e,setTheme:s}=(0,x.F)(),[a,l]=(0,o.useState)(!1);return s(e[Number(a)]),(0,t.jsx)(f.i,{isSelected:a,onValueChange:l,size:"lg",color:"primary",classNames:{wrapper:"bg-warning"},thumbIcon:e=>{let{isSelected:s,className:a}=e;return s?(0,t.jsx)(u,{className:a}):(0,t.jsx)(m,{className:a})}})},p=a(8850);function v(){var e,s,a,f,x,u,m;let{member:v,setMember:g}=(0,o.useContext)(p.Z),[N,w]=(0,o.useState)(),[S,b]=(0,o.useState)(!1),[z,_]=(0,o.useState)(void 0),[C,y]=(0,o.useState)(void 0),[k,D]=(0,o.useState)(0),M=v.shift_duration;(0,o.useEffect)(()=>{let e=setInterval(()=>{if(z){if(C){clearInterval(e);return}D(parseInt((new Date-new Date(z))/1e3))}},1e3);return()=>clearInterval(e)}),(0,o.useEffect)(()=>{fetch("/api/attendance/latest/").then(e=>{if(e.ok)return e.json()}).then(e=>{w(e),e.start_datetime&&!e.end_datetime?D(parseInt((new Date-new Date(e.start_datetime))/1e3)):e.start_datetime&&e.end_datetime&&D(parseInt((new Date(e.end_datetime)-new Date(e.start_datetime))/1e3)),_(e.start_datetime?new Date(e.start_datetime):void 0),y(e.end_datetime?new Date(e.end_datetime):void 0)}).catch(e=>e.json())},[]);let T="",E=()=>{};return z||(T="Are you sure you want to start your shift?",E=()=>{fetch("api/attendance/start/",{method:"POST",headers:{"Content-Type":"application/json"}}).then(e=>{if(e.ok)return e.json()}).then(e=>_(new Date(e.start_datetime)))}),z&&!C&&(T="Are you sure you want to end your shift?",E=()=>{fetch("api/attendance/end/",{method:"POST",headers:{"Content-Type":"application/json"}}).then(e=>{if(e.ok)return e.json()}).then(e=>y(new Date(e.end_datetime)))}),(0,t.jsxs)("main",{children:[(0,t.jsx)(h,{isVisible:S,message:T,onConfirm:E,handleVisiblity:e=>b(e)}),(0,t.jsx)("article",{className:"flex p-3",children:(0,t.jsxs)("div",{className:"flex flex-col gap-4 w-full",children:[(0,t.jsx)(n.w,{radius:"sm",className:"w-full",children:(0,t.jsx)(i.G,{children:(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsxs)("div",{className:"flex gap-2 items-center",children:[(0,t.jsx)("p",{className:"font-bold",children:v.full_name}),(0,t.jsx)(r.z,{color:"primary",variant:"flat",children:v.job})]}),(0,t.jsx)("div",{children:(0,t.jsx)(j,{})})]})})}),(0,t.jsx)(n.w,{radius:"sm",className:"w-full",children:(0,t.jsx)(i.G,{children:(0,t.jsxs)("div",{className:"flex gap-4",children:[(0,t.jsx)(r.z,{color:(null===(e=v.shift)||void 0===e?void 0:e.sun)?"success":"danger",variant:"flat",children:"Sun"}),(0,t.jsx)(r.z,{color:(null===(s=v.shift)||void 0===s?void 0:s.mon)?"success":"danger",variant:"flat",children:"Mon"}),(0,t.jsx)(r.z,{color:(null===(a=v.shift)||void 0===a?void 0:a.tues)?"success":"danger",variant:"flat",children:"Tues"}),(0,t.jsx)(r.z,{color:(null===(f=v.shift)||void 0===f?void 0:f.wed)?"success":"danger",variant:"flat",children:"Wed"}),(0,t.jsx)(r.z,{color:(null===(x=v.shift)||void 0===x?void 0:x.thurs)?"success":"danger",variant:"flat",children:"Thurs"}),(0,t.jsx)(r.z,{color:(null===(u=v.shift)||void 0===u?void 0:u.fri)?"success":"danger",variant:"flat",children:"Fri"}),(0,t.jsx)(r.z,{color:(null===(m=v.shift)||void 0===m?void 0:m.sat)?"success":"danger",variant:"flat",children:"Sat"})]})})}),(0,t.jsxs)(n.w,{radius:"sm",className:"w-full",children:[(0,t.jsx)(c.u,{className:"flex gap-3",children:(0,t.jsx)("p",{className:"font-bold",children:z?z.toDateString():"UNSET"})}),(0,t.jsxs)(i.G,{children:[(0,t.jsxs)("div",{className:"flex gap-2 items-center",children:[(0,t.jsx)("p",{children:"Started At:"}),(0,t.jsx)("span",{className:"text-success font-bold",children:z?z.toLocaleString():"UNSET"})]}),(0,t.jsxs)("div",{className:"flex gap-2 items-center",children:[(0,t.jsx)("p",{children:"Ended At:"}),(0,t.jsx)("span",{className:"text-danger font-bold",children:C?C.toLocaleString():"UNSET"})]}),(0,t.jsxs)("div",{className:"flex gap-2 items-center",children:[(0,t.jsx)("p",{children:"Shift Time:"}),(0,t.jsx)("span",{className:"font-bold text-secondary",children:function(e){let s=Math.floor(e/3600),a=Math.floor(e%3600/60),t=e%60,l="";return s>0&&(l+=s+"H "),a>0&&(l+=a+"M "),t>0&&(l+=t+"S"),l.trim()}(M)})]})]})]}),(0,t.jsxs)(n.w,{radius:"sm",className:"w-full",children:[(0,t.jsx)(c.u,{className:"flex gap-3",children:(0,t.jsx)("p",{className:"font-bold",children:"Timer"})}),(0,t.jsx)(i.G,{children:(0,t.jsxs)("div",{className:"flex flex-col gap-4",children:[(0,t.jsxs)("div",{className:"flex flex-col",children:[(0,t.jsx)("p",{children:"Remaining Time"}),(0,t.jsx)("span",{className:"font-bold text-secondary",children:l(M>=k?M-k:0)})]}),(0,t.jsxs)("div",{className:"flex-col gap-2",children:[(0,t.jsx)("p",{children:"Overtime"}),(0,t.jsx)("span",{className:"font-bold text-warning",children:l(k>=M?k-M:0)})]})]})})]}),z&&C?(0,t.jsxs)(n.w,{radius:"sm",className:"w-full",children:[(0,t.jsx)(c.u,{className:"flex gap-3",children:(0,t.jsx)("p",{className:"font-bold",children:"Note"})}),(0,t.jsx)(i.G,{children:(0,t.jsx)("p",{children:"Next Shift Starts Next Day"})})]}):(0,t.jsxs)("div",{className:"self-end",children:[!z&&(0,t.jsx)(d.A,{radius:"sm",variant:"flat",color:"success",onClick:()=>b(!0),children:"Check in"}),z&&!C&&(0,t.jsx)(d.A,{radius:"sm",color:"danger",variant:"flat",onClick:()=>b(!0),children:"Check out"})]})]})})]})}}},function(e){e.O(0,[111,8,971,69,744],function(){return e(e.s=410)}),_N_E=e.O()}]);